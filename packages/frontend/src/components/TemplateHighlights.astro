---
/**
 * Template Highlights - Featured workflow templates on homepage
 * Shows 3 curated templates with pipeline flow visualizations
 */

const STUDIO_URL = import.meta.env.PUBLIC_STUDIO_URL || "https://studio.floimg.com";

interface FeaturedTemplate {
  id: string;
  name: string;
  description: string;
  category: string;
  steps: number;
  imageUrl: string;
  icon: string;
  requiresCloud?: boolean;
}

const featuredTemplates: FeaturedTemplate[] = [
  {
    id: "ai-hero-image",
    name: "AI Hero Image",
    description: "Generate stunning hero images for websites and landing pages with DALL-E",
    category: "AI Workflows",
    steps: 3,
    imageUrl: "/showcase/ai-generation/futuristic-city.png",
    icon: "sparkles",
    requiresCloud: true,
  },
  {
    id: "revenue-chart",
    name: "Revenue Dashboard",
    description: "Create beautiful revenue visualizations with gradient bars and custom styling",
    category: "Data Viz",
    steps: 2,
    imageUrl: "/showcase/data-viz/quarterly-revenue.png",
    icon: "chart",
    requiresCloud: false,
  },
  {
    id: "social-media-kit",
    name: "Social Media Kit",
    description: "Generate consistent social assets across all platforms in one workflow",
    category: "Marketing",
    steps: 4,
    imageUrl: "/showcase/pipelines/output/avatar-128.png",
    icon: "share",
    requiresCloud: false,
  },
];
---

<section class="template-highlights-section">
  <div class="section-container">
    <div class="section-header">
      <h2 class="section-title">Start with a Template</h2>
      <p class="section-subtitle">
        Pre-built workflows you can customize in Studio or integrate via code
      </p>
    </div>

    <div class="template-grid">
      {
        featuredTemplates.map((template) => (
          <a href={`/templates/${template.id}`} class="template-card">
            <div class="template-visual">
              <div class="flow-nodes">
                <div class="flow-node source">
                  {template.icon === "sparkles" && (
                    <svg
                      class="node-icon"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <path d="M12 3l1.5 4.5L18 9l-4.5 1.5L12 15l-1.5-4.5L6 9l4.5-1.5L12 3z" />
                      <path d="M5 19l1 3 1-3 3-1-3-1-1-3-1 3-3 1 3 1z" />
                    </svg>
                  )}
                  {template.icon === "chart" && (
                    <svg
                      class="node-icon"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <path
                        d="M18 20V10M12 20V4M6 20v-6"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  )}
                  {template.icon === "share" && (
                    <svg
                      class="node-icon"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <circle cx="18" cy="5" r="3" />
                      <circle cx="6" cy="12" r="3" />
                      <circle cx="18" cy="19" r="3" />
                      <line x1="8.59" y1="13.51" x2="15.42" y2="17.49" />
                      <line x1="15.41" y1="6.51" x2="8.59" y2="10.49" />
                    </svg>
                  )}
                </div>
                <svg class="flow-line" viewBox="0 0 60 20">
                  <path
                    d="M0 10 Q30 10 60 10"
                    stroke="currentColor"
                    stroke-width="2"
                    fill="none"
                    stroke-dasharray="4 4"
                  />
                  <circle cx="30" cy="10" r="3" fill="currentColor" />
                </svg>
                <div class="flow-node transform">
                  <svg
                    class="node-icon"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M4 4v5h5M20 20v-5h-5" stroke-linecap="round" stroke-linejoin="round" />
                    <path
                      d="M20.49 9A9 9 0 0 0 5.64 5.64L4 4m15 15l1.64-1.64A9 9 0 0 0 14.51 20"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </div>
                <svg class="flow-line" viewBox="0 0 60 20">
                  <path
                    d="M0 10 Q30 10 60 10"
                    stroke="currentColor"
                    stroke-width="2"
                    fill="none"
                    stroke-dasharray="4 4"
                  />
                  <circle cx="30" cy="10" r="3" fill="currentColor" />
                </svg>
                <div class="flow-node output">
                  <svg
                    class="node-icon"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                    <circle cx="8.5" cy="8.5" r="1.5" />
                    <polyline points="21 15 16 10 5 21" />
                  </svg>
                </div>
              </div>
            </div>
            <div class="template-content">
              <div class="template-header">
                <h3 class="template-title">{template.name}</h3>
              </div>
              <p class="template-description">{template.description}</p>
              <div class="template-meta">
                <span class="template-tag">{template.category}</span>
                {template.requiresCloud && (
                  <span class="cloud-badge">
                    <svg
                      class="cloud-icon"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <path d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
                    </svg>
                    Cloud
                  </span>
                )}
                <span class="template-steps">{template.steps} steps</span>
              </div>
              <span class="template-cta">
                View Template
                <svg
                  class="cta-arrow"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M5 12h14M12 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
            </div>
          </a>
        ))
      }
    </div>

    <div class="section-cta">
      <a href="/templates" class="cta-link">
        Browse All Templates
        <span class="cta-count">(18 templates)</span>
      </a>
    </div>
  </div>
</section>

<style>
  .template-highlights-section {
    padding: 5rem 1.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  .section-container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .section-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .section-title {
    font-size: 2rem;
    font-weight: 700;
    color: #fafafa;
    margin-bottom: 0.75rem;
  }

  .section-subtitle {
    font-size: 1.125rem;
    color: #a1a1aa;
    max-width: 600px;
    margin: 0 auto;
  }

  .template-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }

  @media (max-width: 1024px) {
    .template-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 640px) {
    .template-grid {
      grid-template-columns: 1fr;
    }
  }

  .template-card {
    display: flex;
    flex-direction: column;
    background: #18181b;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 0.75rem;
    overflow: hidden;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .template-card:hover {
    border-color: rgb(13 148 136 / 0.5);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  }

  .template-visual {
    padding: 1.5rem;
    background: linear-gradient(135deg, #27272a 0%, #18181b 100%);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  }

  .flow-nodes {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0;
  }

  .flow-node {
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #27272a;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 0.5rem;
    flex-shrink: 0;
  }

  .flow-node.source {
    background: linear-gradient(135deg, rgb(13 148 136 / 0.2) 0%, rgb(13 148 136 / 0.1) 100%);
    border-color: rgb(13 148 136 / 0.3);
  }

  .flow-node.transform {
    background: #27272a;
  }

  .flow-node.output {
    background: linear-gradient(135deg, rgb(34 197 94 / 0.2) 0%, rgb(34 197 94 / 0.1) 100%);
    border-color: rgb(34 197 94 / 0.3);
  }

  .node-icon {
    width: 1.25rem;
    height: 1.25rem;
    color: #a1a1aa;
  }

  .flow-node.source .node-icon {
    color: rgb(45 212 191);
  }

  .flow-node.output .node-icon {
    color: rgb(74 222 128);
  }

  .flow-line {
    width: 3.5rem;
    height: 1.25rem;
    color: rgba(255, 255, 255, 0.2);
    flex-shrink: 0;
  }

  .template-content {
    padding: 1.25rem;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .template-header {
    margin-bottom: 0.5rem;
  }

  .template-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: #fafafa;
  }

  .template-description {
    font-size: 0.875rem;
    color: #a1a1aa;
    line-height: 1.5;
    margin-bottom: 1rem;
    flex: 1;
  }

  .template-meta {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
  }

  .template-tag {
    font-size: 0.75rem;
    font-weight: 500;
    color: #a1a1aa;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
  }

  .template-steps {
    font-size: 0.75rem;
    color: #71717a;
  }

  .cloud-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
    color: rgb(59 130 246);
    background: rgba(59, 130, 246, 0.15);
    border: 1px solid rgba(59, 130, 246, 0.25);
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
  }

  .cloud-icon {
    width: 0.75rem;
    height: 0.75rem;
  }

  :global(:not(.dark)) .cloud-badge {
    color: rgb(37 99 235);
    background: rgba(59, 130, 246, 0.1);
    border-color: rgba(59, 130, 246, 0.2);
  }

  .template-cta {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: rgb(45 212 191);
    transition: color 0.2s;
  }

  .template-card:hover .template-cta {
    color: rgb(94 234 212);
  }

  .cta-arrow {
    width: 1rem;
    height: 1rem;
    transition: transform 0.2s;
  }

  .template-card:hover .cta-arrow {
    transform: translateX(4px);
  }

  .section-cta {
    text-align: center;
    margin-top: 2.5rem;
  }

  .cta-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: #a1a1aa;
    text-decoration: none;
    transition: color 0.2s;
  }

  .cta-link:hover {
    color: #fafafa;
  }

  .cta-count {
    color: #71717a;
  }

  /* Light mode */
  :global(:not(.dark)) .template-highlights-section {
    border-top-color: #e4e4e7;
  }

  :global(:not(.dark)) .section-title {
    color: #18181b;
  }

  :global(:not(.dark)) .section-subtitle {
    color: #52525b;
  }

  :global(:not(.dark)) .template-card {
    background: #fafafa;
    border-color: #e4e4e7;
  }

  :global(:not(.dark)) .template-card:hover {
    border-color: rgb(13 148 136 / 0.5);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  }

  :global(:not(.dark)) .template-visual {
    background: linear-gradient(135deg, #f4f4f5 0%, #fafafa 100%);
    border-bottom-color: #e4e4e7;
  }

  :global(:not(.dark)) .flow-node {
    background: #ffffff;
    border-color: #e4e4e7;
  }

  :global(:not(.dark)) .flow-node.source {
    background: linear-gradient(135deg, rgb(13 148 136 / 0.1) 0%, rgb(13 148 136 / 0.05) 100%);
    border-color: rgb(13 148 136 / 0.2);
  }

  :global(:not(.dark)) .flow-node.output {
    background: linear-gradient(135deg, rgb(34 197 94 / 0.1) 0%, rgb(34 197 94 / 0.05) 100%);
    border-color: rgb(34 197 94 / 0.2);
  }

  :global(:not(.dark)) .node-icon {
    color: #71717a;
  }

  :global(:not(.dark)) .flow-node.source .node-icon {
    color: rgb(13 148 136);
  }

  :global(:not(.dark)) .flow-node.output .node-icon {
    color: rgb(22 163 74);
  }

  :global(:not(.dark)) .flow-line {
    color: #d4d4d8;
  }

  :global(:not(.dark)) .template-title {
    color: #18181b;
  }

  :global(:not(.dark)) .template-description {
    color: #52525b;
  }

  :global(:not(.dark)) .template-tag {
    color: #52525b;
    background: #f4f4f5;
    border-color: #e4e4e7;
  }

  :global(:not(.dark)) .template-steps {
    color: #a1a1aa;
  }

  :global(:not(.dark)) .template-cta {
    color: rgb(13 148 136);
  }

  :global(:not(.dark)) .template-card:hover .template-cta {
    color: rgb(15 118 110);
  }

  :global(:not(.dark)) .cta-link {
    color: #52525b;
  }

  :global(:not(.dark)) .cta-link:hover {
    color: #18181b;
  }

  :global(:not(.dark)) .cta-count {
    color: #a1a1aa;
  }
</style>
