---
import MarketingLayout from "../layouts/MarketingLayout.astro";
import TemplateCard from "../components/TemplateCard.astro";
import { templates, getCategories } from "../data/templates";

const categories = getCategories();

// Category icons and descriptions
const categoryInfo: Record<string, { icon: string; description: string }> = {
  "AI Workflows": {
    icon: "ðŸ¤–",
    description: "AI-powered image generation with DALL-E and other models",
  },
  "Data Viz": {
    icon: "ðŸ“Š",
    description: "Charts, graphs, diagrams, and data visualization",
  },
  Marketing: {
    icon: "ðŸŽ¨",
    description: "Social media assets, branding, and promotional images",
  },
  Utilities: {
    icon: "ðŸ”§",
    description: "QR codes, thumbnails, format conversion, and more",
  },
};
---

<MarketingLayout title="Gallery" description="Explore templates and workflows built with floimg">
  <main>
    <!-- Hero -->
    <section class="hero-section">
      <div class="hero-container">
        <h1 class="hero-title">Template Gallery</h1>
        <p class="hero-subtitle">
          Explore ready-to-use templates organized by use case. Each template can be opened in
          Studio, customized for your needs, or used directly via Claude Code.
        </p>
        <div class="hero-stats">
          <div class="stat">
            <span class="stat-value">{templates.length}</span>
            <span class="stat-label">Templates</span>
          </div>
          <div class="stat">
            <span class="stat-value">{categories.length}</span>
            <span class="stat-label">Categories</span>
          </div>
          <div class="stat">
            <span class="stat-value"
              >{templates.filter((t) => t.capabilities?.claudeCodeReady).length}</span
            >
            <span class="stat-label">Claude Code Ready</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Category Filter -->
    <section class="filter-section">
      <div class="filter-container">
        <div class="filter-tabs" id="category-tabs">
          <button class="filter-tab active" data-category="all"> All Templates </button>
          {
            categories.map((category) => (
              <button class="filter-tab" data-category={category}>
                <span class="tab-icon">{categoryInfo[category]?.icon}</span>
                {category}
              </button>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Gallery Grid -->
    <section class="gallery-section">
      <div class="gallery-container">
        <!-- Category sections -->
        {
          categories.map((category) => {
            const categoryTemplates = templates.filter((t) => t.category === category);
            return (
              <div class="category-section" data-category-section={category}>
                <div class="category-header">
                  <div class="category-title-group">
                    <span class="category-icon">{categoryInfo[category]?.icon}</span>
                    <h2 class="category-title">{category}</h2>
                    <span class="category-count">{categoryTemplates.length}</span>
                  </div>
                  <p class="category-description">{categoryInfo[category]?.description}</p>
                </div>
                <div class="template-grid">
                  {categoryTemplates.map((template) => (
                    <TemplateCard template={template} />
                  ))}
                </div>
              </div>
            );
          })
        }
      </div>
    </section>

    <!-- CTA -->
    <section class="cta-section">
      <div class="cta-container">
        <h2 class="cta-title">Build Your Own</h2>
        <p class="cta-description">
          Ready to create images like these? Use floimg Studio's visual editor or integrate the
          library directly into your code.
        </p>
        <div class="cta-buttons">
          <a href="https://studio.floimg.com" class="cta-primary"> Launch Studio </a>
          <a href="/docs/getting-started/quick-start" class="cta-secondary"> Quick Start Guide </a>
        </div>
      </div>
    </section>
  </main>

  <script>
    function initGallery() {
      const tabs = document.querySelectorAll(".filter-tab");
      const sections = document.querySelectorAll(".category-section");

      tabs.forEach((tab) => {
        tab.addEventListener("click", () => {
          const category = (tab as HTMLElement).dataset.category;

          // Update active tab
          tabs.forEach((t) => t.classList.remove("active"));
          tab.classList.add("active");

          // Filter sections
          sections.forEach((section) => {
            const sectionCategory = (section as HTMLElement).dataset.categorySection;
            if (category === "all" || sectionCategory === category) {
              (section as HTMLElement).style.display = "block";
            } else {
              (section as HTMLElement).style.display = "none";
            }
          });
        });
      });
    }

    initGallery();
    document.addEventListener("astro:after-swap", initGallery);
  </script>
</MarketingLayout>

<style>
  /* Hero Section */
  .hero-section {
    background: linear-gradient(to bottom, rgb(124 58 237 / 0.05), transparent);
    padding: 4rem 1.5rem;
    text-align: center;
  }

  .hero-container {
    max-width: 800px;
    margin: 0 auto;
  }

  .hero-title {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--sl-color-text);
    margin-bottom: 1rem;
  }

  .hero-subtitle {
    font-size: 1.125rem;
    color: var(--sl-color-gray-2);
    line-height: 1.6;
    margin-bottom: 2rem;
  }

  .hero-stats {
    display: flex;
    justify-content: center;
    gap: 3rem;
  }

  .stat {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: rgb(124 58 237);
  }

  :global(.dark) .stat-value {
    color: rgb(167 139 250);
  }

  .stat-label {
    font-size: 0.875rem;
    color: var(--sl-color-gray-3);
  }

  /* Filter Section */
  .filter-section {
    position: sticky;
    top: 0;
    z-index: 20;
    background: var(--sl-color-bg);
    border-bottom: 1px solid var(--sl-color-gray-5);
    padding: 1rem 1.5rem;
  }

  .filter-container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .filter-tabs {
    display: flex;
    gap: 0.5rem;
    overflow-x: auto;
    padding-bottom: 0.25rem;
  }

  .filter-tab {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.5rem 1rem;
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 500;
    white-space: nowrap;
    cursor: pointer;
    border: none;
    background: var(--sl-color-gray-6);
    color: var(--sl-color-gray-2);
    transition: all 0.2s;
  }

  .filter-tab:hover {
    background: var(--sl-color-gray-5);
  }

  .filter-tab.active {
    background: rgb(124 58 237);
    color: white;
  }

  .tab-icon {
    font-size: 1rem;
  }

  /* Gallery Section */
  .gallery-section {
    padding: 3rem 1.5rem;
    background: var(--sl-color-bg);
  }

  .gallery-container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .category-section {
    margin-bottom: 4rem;
  }

  .category-section:last-child {
    margin-bottom: 0;
  }

  .category-header {
    margin-bottom: 1.5rem;
  }

  .category-title-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .category-icon {
    font-size: 1.5rem;
  }

  .category-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--sl-color-text);
    margin: 0;
  }

  .category-count {
    font-size: 0.875rem;
    padding: 0.125rem 0.5rem;
    background: var(--sl-color-gray-6);
    color: var(--sl-color-gray-3);
    border-radius: 9999px;
  }

  .category-description {
    font-size: 0.95rem;
    color: var(--sl-color-gray-2);
    margin: 0;
  }

  .template-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }

  @media (max-width: 1024px) {
    .template-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 640px) {
    .template-grid {
      grid-template-columns: 1fr;
    }

    .hero-stats {
      gap: 1.5rem;
    }

    .stat-value {
      font-size: 1.5rem;
    }
  }

  /* CTA Section */
  .cta-section {
    padding: 4rem 1.5rem;
    background: var(--sl-color-gray-6);
    border-top: 1px solid var(--sl-color-gray-5);
    text-align: center;
  }

  .cta-container {
    max-width: 600px;
    margin: 0 auto;
  }

  .cta-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--sl-color-text);
    margin-bottom: 0.75rem;
  }

  .cta-description {
    color: var(--sl-color-gray-2);
    margin-bottom: 1.5rem;
  }

  .cta-buttons {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .cta-primary {
    padding: 0.75rem 1.5rem;
    background: rgb(124 58 237);
    color: white;
    border-radius: 0.5rem;
    font-weight: 500;
    text-decoration: none;
    transition: background 0.2s;
  }

  .cta-primary:hover {
    background: rgb(109 40 217);
  }

  .cta-secondary {
    padding: 0.75rem 1.5rem;
    background: var(--sl-color-bg);
    border: 1px solid var(--sl-color-gray-5);
    color: var(--sl-color-text);
    border-radius: 0.5rem;
    font-weight: 500;
    text-decoration: none;
    transition: background 0.2s;
  }

  .cta-secondary:hover {
    background: var(--sl-color-gray-5);
  }
</style>
