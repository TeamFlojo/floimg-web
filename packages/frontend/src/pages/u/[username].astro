---
/**
 * Unified Creator Profile Page
 *
 * NOTE: This page makes API calls to api.floimg.com at runtime.
 * It's a floimg.com-specific feature. Without the FSC backend,
 * only GitHub contributor profiles will be displayed.
 *
 * SSR is required because we can't know all possible usernames at build time.
 */
import { getCollection } from "astro:content";
import MarketingLayout from "../../layouts/MarketingLayout.astro";
import BlogCard from "../../components/blog/BlogCard.astro";
import { resolveProfile, getSocialLinks, type ProfileData } from "../../lib/profile";

// Server-side render: we can't prerender all possible usernames
export const prerender = false;

const { username } = Astro.params;

// Resolve profile at build/request time
const profile: ProfileData = username ? await resolveProfile(username) : null;

// Determine page metadata
let pageTitle = "User Not Found";
let pageDescription = "This user doesn't exist or their profile is private.";

if (profile?.type === "fsc") {
  const displayName = profile.user.name || `@${profile.user.username}`;
  pageTitle = `${displayName} - FloImg Creator`;
  pageDescription = profile.user.bio || `View ${displayName}'s FloImg creations and workflows.`;
} else if (profile?.type === "github") {
  pageTitle = `${profile.contributor.login} - FloImg Contributor`;
  pageDescription = `${profile.contributor.login} is an open source contributor to FloImg with ${profile.contributor.contributions} contributions.`;
}

// Social links for FSC profiles
const socialLinks = profile?.type === "fsc" ? getSocialLinks(profile.user) : [];

// Get blog posts authored by this user (query by username)
const authoredPosts = username
  ? (await getCollection("blog", ({ data }) => !data.draft && data.author === username)).sort(
      (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
    )
  : [];

const API_URL = import.meta.env.PUBLIC_API_URL || "https://api.floimg.com";
---

<MarketingLayout title={pageTitle} description={pageDescription}>
  <main class="profile-page">
    <div class="container">
      {
        !profile ? (
          <div class="error-state">
            <h1>User Not Found</h1>
            <p>This user doesn't exist or their profile is private.</p>
            <div class="error-actions">
              <a href="/showcase" class="btn primary">
                Browse Showcase
              </a>
              <a href="/community" class="btn secondary">
                View Contributors
              </a>
            </div>
          </div>
        ) : profile.type === "fsc" ? (
          <div class="profile-content">
            <header class="profile-header">
              <div class="avatar-container">
                {profile.user.avatarUrl ? (
                  <img
                    src={profile.user.avatarUrl}
                    alt={profile.user.name || profile.user.username}
                    class="avatar-image"
                  />
                ) : (
                  <div class="avatar-fallback">
                    {(profile.user.name?.[0] || profile.user.username?.[0] || "?").toUpperCase()}
                  </div>
                )}
              </div>

              <div class="profile-info">
                <div class="name-row">
                  <h1 class="profile-name">{profile.user.name || `@${profile.user.username}`}</h1>
                  {profile.user.isTeamMember && (
                    <span class="team-badge" title={profile.user.teamRole || "Team Member"}>
                      {profile.user.teamRole || "Team"}
                    </span>
                  )}
                </div>

                <p class="username">@{profile.user.username}</p>

                {profile.user.bio && <p class="bio">{profile.user.bio}</p>}

                {socialLinks.length > 0 && (
                  <div class="social-links">
                    {socialLinks.map((link) => (
                      <a
                        href={link.url}
                        class={`social-link ${link.platform}`}
                        target="_blank"
                        rel="noopener noreferrer"
                        title={link.platform}
                      >
                        {link.platform === "github" && (
                          <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                          </svg>
                        )}
                        {link.platform === "twitter" && (
                          <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                          </svg>
                        )}
                        {link.platform === "bluesky" && (
                          <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8z" />
                          </svg>
                        )}
                        {link.platform === "instagram" && (
                          <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
                          </svg>
                        )}
                        {link.platform === "website" && (
                          <svg
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                          >
                            <circle cx="12" cy="12" r="10" />
                            <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
                          </svg>
                        )}
                        <span>{link.handle}</span>
                      </a>
                    ))}
                  </div>
                )}

                <div class="profile-stats">
                  <span class="stat">
                    <span class="stat-value">{profile.stats.publicProjects}</span>
                    <span class="stat-label">Projects</span>
                  </span>
                  <span class="stat">
                    <span class="stat-value">{profile.stats.publicWorkflows}</span>
                    <span class="stat-label">Workflows</span>
                  </span>
                  <span class="stat">
                    <span class="stat-value">{profile.stats.showcaseItems}</span>
                    <span class="stat-label">Showcase</span>
                  </span>
                </div>

                <p class="member-since">
                  Member since{" "}
                  {new Date(profile.user.createdAt).toLocaleDateString("en-US", {
                    year: "numeric",
                    month: "long",
                  })}
                </p>
              </div>
            </header>

            <section class="profile-tabs">
              <div class="tabs-nav">
                <button class="tab-btn active" data-tab="showcase">
                  Showcase
                </button>
                <button class="tab-btn" data-tab="projects">
                  Projects
                </button>
                {authoredPosts.length > 0 && (
                  <button class="tab-btn" data-tab="blog">
                    Blog ({authoredPosts.length})
                  </button>
                )}
                {profile.user.githubHandle && (
                  <button class="tab-btn" data-tab="contributions">
                    Contributions
                  </button>
                )}
              </div>

              <div id="tab-showcase" class="tab-content active">
                <div id="showcase-loading" class="content-loading">
                  <div class="skeleton-grid">
                    <div class="skeleton-card" />
                    <div class="skeleton-card" />
                    <div class="skeleton-card" />
                  </div>
                </div>
                <div id="showcase-grid" class="showcase-grid hidden" />
                <div id="showcase-empty" class="empty-state hidden">
                  <p>No showcase items yet.</p>
                </div>
              </div>

              <div id="tab-projects" class="tab-content hidden">
                <div id="projects-loading" class="content-loading">
                  <div class="skeleton-list">
                    <div class="skeleton-row" />
                    <div class="skeleton-row" />
                    <div class="skeleton-row" />
                  </div>
                </div>
                <div id="projects-list" class="projects-list hidden" />
                <div id="projects-empty" class="empty-state hidden">
                  <p>No public projects yet.</p>
                </div>
              </div>

              {authoredPosts.length > 0 && (
                <div id="tab-blog" class="tab-content hidden">
                  <div class="blog-posts-grid">
                    {authoredPosts.map((post) => (
                      <BlogCard post={post} />
                    ))}
                  </div>
                </div>
              )}

              <div id="tab-contributions" class="tab-content hidden">
                <div class="contributions-cta">
                  <a
                    href={`https://github.com/${profile.user.githubHandle}`}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="github-link"
                  >
                    View contributions on GitHub
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                      <polyline points="15 3 21 3 21 9" />
                      <line x1="10" y1="14" x2="21" y2="3" />
                    </svg>
                  </a>
                </div>
              </div>
            </section>
          </div>
        ) : (
          <div class="profile-content github-profile">
            <header class="profile-header">
              <div class="avatar-container">
                <img
                  src={profile.contributor.avatar_url}
                  alt={profile.contributor.login}
                  class="avatar-image"
                />
              </div>

              <div class="profile-info">
                <div class="name-row">
                  <h1 class="profile-name">{profile.contributor.login}</h1>
                  <span class="contributor-badge">OSS Contributor</span>
                </div>

                <p class="bio">
                  Open source contributor to FloImg with {profile.contributor.contributions}{" "}
                  {profile.contributor.contributions === 1 ? "contribution" : "contributions"}.
                </p>

                <div class="social-links">
                  <a
                    href={profile.contributor.html_url}
                    class="social-link github"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                    </svg>
                    <span>View on GitHub</span>
                  </a>
                </div>

                <div class="profile-stats">
                  <span class="stat">
                    <span class="stat-value">{profile.contributor.contributions}</span>
                    <span class="stat-label">Contributions</span>
                  </span>
                </div>
              </div>
            </header>

            <section class="claim-profile-cta">
              <div class="cta-content">
                <h2>Claim Your FloImg Profile</h2>
                <p>
                  Create a FloImg Studio Cloud account to showcase your work, save workflows, and
                  connect with the community.
                </p>
                <a href="/signup" class="btn primary">
                  Create Free Account
                </a>
              </div>
            </section>
          </div>
        )
      }
    </div>
  </main>

  <script define:vars={{ API_URL, username, profileType: profile?.type }}>
    // Tab switching
    document.querySelectorAll(".tab-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        const tabId = btn.dataset.tab;

        // Update active tab button
        document.querySelectorAll(".tab-btn").forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");

        // Show correct tab content
        document.querySelectorAll(".tab-content").forEach((c) => c.classList.add("hidden"));
        document.getElementById(`tab-${tabId}`)?.classList.remove("hidden");
      });
    });

    // Load dynamic content for FSC profiles
    if (profileType === "fsc" && username) {
      loadShowcase();
      loadProjects();
    }

    async function loadShowcase() {
      const loadingEl = document.getElementById("showcase-loading");
      const gridEl = document.getElementById("showcase-grid");
      const emptyEl = document.getElementById("showcase-empty");

      try {
        const res = await fetch(`${API_URL}/api/users/${username}/showcase`);
        if (!res.ok) throw new Error("Failed to fetch showcase");

        const data = await res.json();
        loadingEl?.classList.add("hidden");

        if (data.showcase.length === 0) {
          emptyEl?.classList.remove("hidden");
          return;
        }

        if (gridEl) {
          gridEl.innerHTML = data.showcase
            .map(
              (item) => `
              <a href="/showcase/item?id=${item.id}" class="showcase-card">
                <div class="showcase-image">
                  <div class="showcase-placeholder">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                      <circle cx="8.5" cy="8.5" r="1.5"/>
                      <polyline points="21 15 16 10 5 21"/>
                    </svg>
                  </div>
                </div>
                <div class="showcase-info">
                  <h3>${escapeHtml(item.title)}</h3>
                  ${item.description ? `<p>${escapeHtml(item.description)}</p>` : ""}
                </div>
              </a>
            `
            )
            .join("");
          gridEl.classList.remove("hidden");
        }
      } catch (err) {
        console.error("Failed to load showcase:", err);
        loadingEl?.classList.add("hidden");
        emptyEl?.classList.remove("hidden");
      }
    }

    async function loadProjects() {
      const loadingEl = document.getElementById("projects-loading");
      const listEl = document.getElementById("projects-list");
      const emptyEl = document.getElementById("projects-empty");

      try {
        const res = await fetch(`${API_URL}/api/users/${username}/projects`);
        if (!res.ok) throw new Error("Failed to fetch projects");

        const data = await res.json();
        loadingEl?.classList.add("hidden");

        if (data.projects.length === 0) {
          emptyEl?.classList.remove("hidden");
          return;
        }

        if (listEl) {
          listEl.innerHTML = data.projects
            .map(
              (project) => `
              <div class="project-card">
                <div class="project-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                  </svg>
                </div>
                <div class="project-info">
                  <h3>${escapeHtml(project.name)}</h3>
                  ${project.description ? `<p>${escapeHtml(project.description)}</p>` : ""}
                </div>
              </div>
            `
            )
            .join("");
          listEl.classList.remove("hidden");
        }
      } catch (err) {
        console.error("Failed to load projects:", err);
        loadingEl?.classList.add("hidden");
        emptyEl?.classList.remove("hidden");
      }
    }

    function escapeHtml(text) {
      const div = document.createElement("div");
      div.textContent = text;
      return div.innerHTML;
    }
  </script>
</MarketingLayout>

<style>
  .profile-page {
    min-height: 70vh;
    padding: 2rem 1.5rem 4rem;
  }

  .container {
    max-width: 900px;
    margin: 0 auto;
  }

  /* Error State */
  .error-state {
    text-align: center;
    padding: 4rem 1.5rem;
  }

  .error-state h1 {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--sl-color-text);
    margin-bottom: 0.75rem;
  }

  .error-state p {
    color: var(--sl-color-gray-3);
    margin-bottom: 2rem;
  }

  .error-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s;
  }

  .btn.primary {
    background: rgb(13 148 136);
    color: white;
  }

  .btn.primary:hover {
    background: rgb(15 118 110);
  }

  .btn.secondary {
    background: var(--sl-color-gray-6);
    color: var(--sl-color-text);
    border: 1px solid var(--sl-color-gray-5);
  }

  .btn.secondary:hover {
    border-color: var(--sl-color-gray-4);
  }

  /* Profile Header */
  .profile-header {
    display: flex;
    gap: 2rem;
    padding: 2rem 0;
    border-bottom: 1px solid var(--sl-color-gray-5);
    margin-bottom: 2rem;
  }

  @media (max-width: 640px) {
    .profile-header {
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 1.5rem;
    }
  }

  .avatar-container {
    flex-shrink: 0;
  }

  .avatar-image,
  .avatar-fallback {
    width: 140px;
    height: 140px;
    border-radius: 50%;
  }

  .avatar-image {
    object-fit: cover;
    border: 3px solid var(--sl-color-gray-5);
  }

  .avatar-fallback {
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, rgb(13 148 136), rgb(20 184 166));
    color: white;
    font-size: 3.5rem;
    font-weight: 700;
  }

  .profile-info {
    flex: 1;
  }

  .name-row {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.25rem;
    flex-wrap: wrap;
  }

  @media (max-width: 640px) {
    .name-row {
      justify-content: center;
    }
  }

  .profile-name {
    font-size: 2rem;
    font-weight: 700;
    color: var(--sl-color-text);
    margin: 0;
  }

  .team-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    background: rgb(13 148 136 / 0.15);
    color: rgb(13 148 136);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-radius: 9999px;
  }

  .contributor-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    background: var(--sl-color-gray-6);
    color: var(--sl-color-gray-2);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-radius: 9999px;
  }

  .username {
    color: var(--sl-color-gray-3);
    margin-bottom: 0.75rem;
  }

  .bio {
    color: var(--sl-color-gray-2);
    line-height: 1.6;
    margin-bottom: 1rem;
    max-width: 500px;
  }

  @media (max-width: 640px) {
    .bio {
      max-width: 100%;
    }
  }

  /* Social Links */
  .social-links {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    margin-bottom: 1.25rem;
  }

  @media (max-width: 640px) {
    .social-links {
      justify-content: center;
    }
  }

  .social-link {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.375rem 0.75rem;
    background: var(--sl-color-gray-6);
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 9999px;
    color: var(--sl-color-gray-2);
    font-size: 0.875rem;
    text-decoration: none;
    transition: all 0.2s;
  }

  .social-link:hover {
    border-color: var(--sl-color-accent);
    color: var(--sl-color-accent);
  }

  .social-link svg {
    width: 1rem;
    height: 1rem;
  }

  /* Stats */
  .profile-stats {
    display: flex;
    gap: 2rem;
    margin-bottom: 1rem;
  }

  @media (max-width: 640px) {
    .profile-stats {
      justify-content: center;
    }
  }

  .stat {
    display: flex;
    flex-direction: column;
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--sl-color-text);
  }

  .stat-label {
    font-size: 0.875rem;
    color: var(--sl-color-gray-3);
  }

  .member-since {
    font-size: 0.875rem;
    color: var(--sl-color-gray-4);
  }

  /* Tabs */
  .profile-tabs {
    padding: 1rem 0;
  }

  .tabs-nav {
    display: flex;
    gap: 0.5rem;
    border-bottom: 1px solid var(--sl-color-gray-5);
    margin-bottom: 1.5rem;
  }

  .tab-btn {
    padding: 0.75rem 1.25rem;
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    color: var(--sl-color-gray-3);
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
  }

  .tab-btn:hover {
    color: var(--sl-color-text);
  }

  .tab-btn.active {
    color: rgb(13 148 136);
    border-bottom-color: rgb(13 148 136);
  }

  .tab-content {
    min-height: 200px;
  }

  /* Loading Skeletons */
  .skeleton-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }

  .skeleton-card {
    height: 200px;
    background: var(--sl-color-gray-6);
    border-radius: 0.75rem;
    animation: pulse 2s infinite;
  }

  .skeleton-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .skeleton-row {
    height: 80px;
    background: var(--sl-color-gray-6);
    border-radius: 0.75rem;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  /* Showcase Grid */
  .showcase-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }

  .showcase-card {
    display: block;
    background: var(--sl-color-bg);
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 0.75rem;
    overflow: hidden;
    text-decoration: none;
    transition: all 0.2s;
  }

  .showcase-card:hover {
    border-color: rgb(13 148 136);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .showcase-image {
    aspect-ratio: 4/3;
    background: var(--sl-color-gray-6);
  }

  .showcase-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--sl-color-gray-4);
  }

  .showcase-placeholder svg {
    width: 3rem;
    height: 3rem;
  }

  .showcase-info {
    padding: 1rem;
  }

  .showcase-info h3 {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--sl-color-text);
    margin-bottom: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .showcase-info p {
    font-size: 0.75rem;
    color: var(--sl-color-gray-3);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Projects List */
  .projects-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .project-card {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1.25rem;
    background: var(--sl-color-bg);
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 0.75rem;
    transition: all 0.2s;
  }

  .project-card:hover {
    border-color: rgb(13 148 136);
  }

  .project-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    background: rgb(13 148 136 / 0.1);
    color: rgb(13 148 136);
    border-radius: 0.5rem;
    flex-shrink: 0;
  }

  .project-icon svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  .project-info {
    flex: 1;
    min-width: 0;
  }

  .project-info h3 {
    font-weight: 600;
    color: var(--sl-color-text);
    margin-bottom: 0.25rem;
  }

  .project-info p {
    font-size: 0.875rem;
    color: var(--sl-color-gray-3);
  }

  /* Empty State */
  .empty-state {
    text-align: center;
    padding: 3rem 1.5rem;
    background: var(--sl-color-gray-6);
    border-radius: 0.75rem;
    color: var(--sl-color-gray-4);
  }

  /* Contributions Tab */
  .contributions-cta {
    padding: 2rem;
    text-align: center;
  }

  .github-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: var(--sl-color-gray-6);
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 0.5rem;
    color: var(--sl-color-text);
    text-decoration: none;
    font-weight: 500;
    transition: all 0.2s;
  }

  .github-link:hover {
    border-color: var(--sl-color-gray-4);
    background: var(--sl-color-gray-5);
  }

  .github-link svg {
    width: 1rem;
    height: 1rem;
  }

  /* Claim Profile CTA */
  .claim-profile-cta {
    margin-top: 2rem;
    padding: 2rem;
    background: linear-gradient(135deg, rgb(13 148 136 / 0.1), rgb(20 184 166 / 0.05));
    border: 1px solid rgb(13 148 136 / 0.2);
    border-radius: 1rem;
    text-align: center;
  }

  .cta-content h2 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--sl-color-text);
    margin-bottom: 0.75rem;
  }

  .cta-content p {
    color: var(--sl-color-gray-3);
    margin-bottom: 1.5rem;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
  }

  /* Blog Posts Grid */
  .blog-posts-grid {
    display: grid;
    grid-template-columns: repeat(1, 1fr);
    gap: 1.5rem;
  }

  @media (min-width: 640px) {
    .blog-posts-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .hidden {
    display: none !important;
  }
</style>
